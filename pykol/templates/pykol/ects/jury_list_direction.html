{% extends "pykol/base.html" %}
{% block title %}Liste des jurys ECTS − {{ block.super }}{% endblock %}
{% block content %}
<h2>Liste des jurys
  <abbr title="European Credit Transfer System" lang="en">ECTS</abbr></h2>

<section>
  {% if jury_list %}
  <table id="ects_jury_list">
    <thead>
      <tr>
        <th>Nom</th>
        <th>Classe</th>
        <th>Date du jury</th>
        <th>Mentions</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for jury in jury_list %}
      <tr>
        <td>{{ jury }}</td>
        <td>{{ jury.classe }}</td>
        <td>{{ jury.date }}</td>
        <td>{{ jury.mentions_reste }} mentions à saisir</td>
        <td class="actions"><a class="btn btn-primary" href="{{ jury.get_absolute_url }}">Détails</a>
          {% if jury.etat == jury.ETAT_TERMINE %}
          <a class="btn btn-success" href="{% url 'ects_jury_attestation' jury.pk %}">Éditer les attestations</a>
          {% endif %}
          {% if jury.etat == jury.ETAT_PREVU %}
          <form method="post" action="{% url 'ects_jury_supprimer' jury.pk %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger">Supprimer</button>
          </form>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>Aucun jury d'attribution des <abbr>ECTS</abbr> n'est programmé pour
  le moment.</p>
  {% endif %}

  {% if jury_creer_form %}
  <h3>Création d'un jury ECTS</h3>
  <form method="post" action="{% url 'ects_jury_creer' %}">
    <table>
      {{ jury_creer_form.as_table }}
    </table>
    <p><input type="submit" value="Créer le jury"></p>
  </form>
  {% endif %}
</section>
{% endblock %}
